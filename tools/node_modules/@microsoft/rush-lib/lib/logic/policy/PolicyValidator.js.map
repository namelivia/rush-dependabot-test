{"version":3,"file":"PolicyValidator.js","sourceRoot":"","sources":["../../../src/logic/policy/PolicyValidator.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;;AAG3D,qDAAkD;AAClD,iEAA8D;AAQ9D,MAAa,eAAe;IACnB,MAAM,CAAC,cAAc,CAAC,iBAAoC,EAAE,OAAgC;QACjG,IAAI,OAAO,CAAC,YAAY,EAAE;YACxB,OAAO;SACR;QAED,+BAAc,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;QAC3C,IAAI,CAAC,OAAO,CAAC,sBAAsB,EAAE;YACnC,iFAAiF;YACjF,sGAAsG;YACtG,2CAAoB,CAAC,QAAQ,CAAC,iBAAiB,EAAE,OAAO,CAAC,CAAC;SAC3D;IACH,CAAC;CACF;AAbD,0CAaC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\n\nimport { RushConfiguration } from '../../api/RushConfiguration';\nimport { GitEmailPolicy } from './GitEmailPolicy';\nimport { ShrinkwrapFilePolicy } from './ShrinkwrapFilePolicy';\n\nexport interface IPolicyValidatorOptions {\n  bypassPolicy?: boolean;\n  allowShrinkwrapUpdates?: boolean;\n  shrinkwrapVariant?: string;\n}\n\nexport class PolicyValidator {\n  public static validatePolicy(rushConfiguration: RushConfiguration, options: IPolicyValidatorOptions): void {\n    if (options.bypassPolicy) {\n      return;\n    }\n\n    GitEmailPolicy.validate(rushConfiguration);\n    if (!options.allowShrinkwrapUpdates) {\n      // Don't validate the shrinkwrap if updates are allowed, as it's likely to change\n      // It also may have merge conflict markers, which PNPM can gracefully handle, but the validator cannot\n      ShrinkwrapFilePolicy.validate(rushConfiguration, options);\n    }\n  }\n}\n"]}