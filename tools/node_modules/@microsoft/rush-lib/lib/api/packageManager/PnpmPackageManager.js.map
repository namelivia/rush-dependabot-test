{"version":3,"file":"PnpmPackageManager.js","sourceRoot":"","sources":["../../../src/api/packageManager/PnpmPackageManager.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;;;;;;;;;;;;;;;;;;;;;;;;;AAE3D,+CAAiC;AACjC,2CAA6B;AAE7B,6DAA0D;AAC1D,qDAAkD;AAElD;;GAEG;AACH,MAAa,kBAAmB,SAAQ,+BAAc;IAMpD,gBAAgB;IAChB,YAAmB,OAAe;QAChC,KAAK,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAEvB,MAAM,aAAa,GAAkB,IAAI,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAEhE,IAAI,aAAa,CAAC,KAAK,IAAI,CAAC,EAAE;YAC5B,8BAA8B;YAC9B,IAAI,CAAC,iBAAiB,GAAG,6BAAa,CAAC,kBAAkB,CAAC;SAC3D;aAAM;YACL,IAAI,CAAC,iBAAiB,GAAG,6BAAa,CAAC,kBAAkB,CAAC;SAC3D;QAED,IAAI,CAAC,mBAAmB,GAAG,6BAAa,CAAC,wBAAwB,CAAC;QAElE,+BAA+B;QAC/B,yEAAyE;QACzE,IAAI,CAAC,8BAA8B,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,OAAO,EAAE,WAAW,CAAC,CAAC;IACxF,CAAC;IAED;;;;;OAKG;IACH,IAAW,gBAAgB;QACzB,OAAO,IAAI,CAAC,iBAAiB,CAAC;IAChC,CAAC;CACF;AAnCD,gDAmCC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\n\nimport * as semver from 'semver';\nimport * as path from 'path';\n\nimport { RushConstants } from '../../logic/RushConstants';\nimport { PackageManager } from './PackageManager';\n\n/**\n * Support for interacting with the PNPM package manager.\n */\nexport class PnpmPackageManager extends PackageManager {\n  protected _pnpmfileFilename: string;\n\n  // example: node_modules/.pnpm/lock.yaml\n  public readonly internalShrinkwrapRelativePath: string;\n\n  /** @internal */\n  public constructor(version: string) {\n    super(version, 'pnpm');\n\n    const parsedVersion: semver.SemVer = new semver.SemVer(version);\n\n    if (parsedVersion.major >= 6) {\n      // Introduced in version 6.0.0\n      this._pnpmfileFilename = RushConstants.pnpmfileV6Filename;\n    } else {\n      this._pnpmfileFilename = RushConstants.pnpmfileV1Filename;\n    }\n\n    this._shrinkwrapFilename = RushConstants.pnpmV3ShrinkwrapFilename;\n\n    // node_modules/.pnpm/lock.yaml\n    // See https://github.com/pnpm/pnpm/releases/tag/v4.0.0 for more details.\n    this.internalShrinkwrapRelativePath = path.join('node_modules', '.pnpm', 'lock.yaml');\n  }\n\n  /**\n   * The filename of the shrinkwrap file that is used by the package manager.\n   *\n   * @remarks\n   * Example: `pnpmfile.js` or `.pnpmfile.cjs`\n   */\n  public get pnpmfileFilename(): string {\n    return this._pnpmfileFilename;\n  }\n}\n"]}